<link href="/styles/home.css" rel="stylesheet">
<p>This is a method of randomly sampling n items from a set of M items, with equal probability; where M &gt;= n and M, the number of items is unknown until the end.<code></code>
This means that the equal probability sampling should be maintained  for all successive items &gt; n as they become available (although the content of successive samples can change).<code></code>
<code></code>
<code></code>
<br>The algorithm:<code></code>
:* Select the first n items as the sample as they become available;<code></code>
:* For the i-th item where i &gt; n, have a random chance of n/i of keeping it.  If failing this chance, the sample remains the same.  If not, have it randomly (1/n) replace one of the previously selected n items of the sample.<code></code>
:* Repeat &nbsp; 2<sup>nd</sup> step &nbsp; for any subsequent items.<code></code>
<code></code>
<code></code>
<br>The Task:<code></code>
:* Create a function <code>s_of_n_creator</code> that given <math>n</math> the maximum sample size, returns a function <code>s_of_n</code> that takes one parameter, <code>item</code>.<code></code>
:* Function  <code>s_of_n</code> when called with successive items returns an equi-weighted random sample of up to n of its items so far, each time it is called, calculated using Knuths Algorithm S.<code></code>
:* Test your functions by printing and showing the frequency of occurrences of the selected digits from 100,000 repetitions of:<code></code>
:::# Use the s<em>of</em>n<em>creator with n == 3 to generate an s</em>of<em>n.<code></code>
:::# call s</em>of_n with each of the digits 0 to 9 in order, keeping the returned three digits of its random sampling from its last call with argument item=9.<code></code>
<code></code>
<code></code>
Note: A class taking n and generating a callable instance/function might also be used.<code></code>
<code></code>
<code></code>
<br>Reference:<code></code></p>
<ul>
<li>The Art of Computer Programming, Vol 2, 3.4.2 p.142<code></code>
<code></code>
<code></code>
<br>Related tasks:<code></code></li>
<li><a href="One of n lines in a file">One of n lines in a file</a><code></code></li>
<li><a href="Accumulator factory">Accumulator factory</a><code></code>
<br><br><code></code></li>
</ul>