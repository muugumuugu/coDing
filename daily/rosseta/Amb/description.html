<link href="/styles/home.css" rel="stylesheet">
<p>Define and give an example of the Amb operator.<code></code>
<code></code>
The Amb operator expresses nondeterminism. This doesn't refer to randomness (as in "nondeterministic universe") but is closely related to the term as it is used in automata theory ("non-deterministic finite automaton").<code></code>
<code></code>
The Amb operator takes a variable number of expressions (or values if that's simpler in the language) and yields a correct one which will satisfy a constraint in some future computation, thereby avoiding failure.<code></code>
<code></code>
Problems whose solution the Amb operator naturally expresses can be approached with other tools, such as explicit nested iterations over data sets, or with pattern matching. By contrast, the Amb operator appears integrated into the language. Invocations of Amb are not wrapped in any visible loops or other search patterns; they appear to be independent.<code></code>
<code></code>
Essentially Amb(x, y, z) splits the computation into three possible futures: a future in which the value x is yielded, a future in which the value y is yielded and a future in which the value z is yielded. The future which leads to a successful subsequent computation is chosen. The other "parallel universes" somehow go away.   Amb called with no arguments fails.<code></code>
<code></code>
For simplicity, one of the domain values usable with Amb may denote failure, if that is convenient. For instance, it is convenient if a Boolean false denotes failure, so that Amb(false) fails, and thus constraints can be expressed using Boolean expressions like Amb(x * y == 8) which unless x and y add to four.<code></code>
<code></code>
A pseudo-code program which satisfies this constraint might look like:<code></code>
<code></code></p>
<pre>let x = Amb(1, 2, 3)<code></code>
let y = Amb(7, 6, 4, 5)<code></code>
Amb(x * y = 8)<code></code>
print x, y</pre>
<p><code></code>
<code></code>
The output is <code>2 4</code> because <code>Amb(1, 2, 3)</code> correctly chooses the future in which <code>x</code> has value <code>2</code>, <code>Amb(7, 6, 4, 5)</code> chooses <code>4</code> and consequently <code>Amb(x * y = 8)</code> produces a success.<code></code>
<code></code>
Alternatively, failure could be represented using strictly <code>Amb()</code>:<code></code>
<code></code></p>
<pre>unless x * y = 8 do Amb()</pre>
<p><code></code>
<code></code>
Or else Amb could take the form of two operators or functions: one for producing values and one for enforcing constraints:<code></code>
<code></code></p>
<pre>let x = Ambsel(1, 2, 3)<code></code>
let y = Ambsel(4, 5, 6)<code></code>
Ambassert(x * y = 8)<code></code>
print x, y</pre>
<p><code></code>
<code></code>
where <code>Ambassert</code> behaves like <code>Amb()</code> if the Boolean expression is false, otherwise it allows the future computation to take place, without yielding any value.<code></code>
<code></code>
The task is to somehow implement Amb, and demonstrate it with a program which chooses one word from each of the following four sets of character strings to generate a four-word sentence:<code></code>
<code></code></p>
<h1 id="c40cc41c"><code>"the" "that" "a"</code><code></code></h1>
<h1 id="c42cc43c"><code>"frog" "elephant" "thing"</code><code></code></h1>
<h1 id="c44cc45c"><code>"walked" "treaded" "grows"</code><code></code></h1>
<h1 id="c46cc47c"><code>"slowly" "quickly"</code><code></code></h1>
<p><code></code>
The constraint to be satisfied is that the last character of each word (other than the last) is the same as the first character of its successor.<code></code>
<code></code>
The only successful sentence is <code>"that thing grows slowly"</code>; other combinations do not satisfy the constraint and thus fail.<code></code>
<code></code>
The goal of this task isn't to simply process the four lists of words with explicit, deterministic program flow such as nested iteration, to trivially demonstrate the correct output. The goal is to implement the Amb operator, or a facsimile thereof that is possible within the language limitations.<code></code></p>